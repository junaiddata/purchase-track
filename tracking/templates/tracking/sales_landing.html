{% extends 'tracking/base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <div class="text-center">
        <h2 class="text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">Purchase Tracking</h2>
        <p class="mx-auto mt-3 max-w-2xl text-xl text-slate-500 sm:mt-4">
            Select a Manufacturer to view incoming shipments and pending orders.
        </p>
    </div>

    <div class="mt-10 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3">
        {% for firm in firms %}
        <a href="{% url 'sales_firm_track' %}?firm={{ firm.name }}"
            class="relative flex items-center justify-center rounded-xl border border-slate-200 bg-white p-8 shadow-sm hover:border-brand-500 hover:ring-1 hover:ring-brand-500 hover:shadow-md transition-all duration-200 group">
            <div class="text-center">
                <div
                    class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-slate-50 group-hover:bg-brand-50 transition-colors overflow-hidden">
                    {% if firm.logo %}
                    <img src="{{ firm.logo.url }}" alt="{{ firm.name }}" class="h-14 w-14 object-contain">
                    {% else %}
                    <!-- Factory Icon -->
                    <svg class="h-8 w-8 text-slate-400 group-hover:text-brand-600" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    {% endif %}
                </div>
                <h3 class="mt-4 text-lg font-bold text-slate-900">{{ firm.name }}</h3>
                <p class="mt-1 text-sm text-slate-500">View Incoming Status</p>
            </div>
        </a>
        {% empty %}
        <div class="col-span-full text-center py-12">
            <p class="text-slate-500">No active firms found with pending orders.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}